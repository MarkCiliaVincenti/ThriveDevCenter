@Time.ToLocalTime().ToString(FormatString)

@code {

    [Parameter]
    public DateTime Time { get; set; }

    [Parameter]
    public bool IncludeSeconds { get; set; } = true;

    [Parameter]
    public TimeSpan ShortDisplayCutoff { get; set; } = TimeSpan.FromHours(20);

    private string FormatString
    {
        get
        {
            var now = DateTime.UtcNow;

            // If in the future more than an hour, show full time
            if (now - Time < -TimeSpan.FromHours(1))
            {
                return "G";
            }

            if (now - Time < ShortDisplayCutoff)
            {
                return IncludeSeconds ? "T" : "t";
            }

            return "G";
        }
    }

}
